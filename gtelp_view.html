<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>G-TELP ì±„ìš©ì •ë³´ í—ˆë¸Œ</title>
<style>
body{font-family:'Segoe UI', Tahoma, sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
.container{max-width:1400px;margin:0 auto}
.header{background:white;padding:30px;border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,0.1);text-align:center;margin-bottom:30px}
.header h1{color:#667eea;font-size:2.5em;margin-bottom:10px}
.header p{color:#666;font-size:1.1em}
.jobs-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}
.job-card{background:white;padding:25px;border-radius:15px;box-shadow:0 5px 20px rgba(0,0,0,0.1);transition:0.3s}
.job-card:hover{transform:translateY(-5px)}
.job-title{font-weight:600;color:#333;font-size:1.2em}
.job-company{color:#667eea;font-weight:600;margin:8px 0}
.job-tag{background:#f0f4ff;color:#667eea;padding:5px 10px;border-radius:20px;font-size:0.85em;margin-right:5px}
.job-link{display:inline-block;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:8px 16px;border-radius:25px;text-decoration:none;font-weight:600}
.job-link:active,.job-link:focus{outline:none}
.btn-disabled{display:inline-block;padding:8px 16px;border-radius:25px;background:#eee;color:#999;border:1px solid #ddd;font-weight:600}
.small-search{display:inline-block;margin-left:8px;padding:6px 12px;border-radius:18px;background:#f0f4ff;color:#667eea;text-decoration:none;border:1px solid #dfe8ff;font-weight:600;font-size:0.9em}
.no-data{background:white;padding:50px;border-radius:15px;text-align:center;box-shadow:0 5px 20px rgba(0,0,0,0.1)}
@media(max-width:768px){.jobs-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒŸ G-TELP ì±„ìš©ì •ë³´ í—ˆë¸Œ</h1>
    <p>ì§€í…”í”„ ê´€ë ¨ ìµœì‹  ì±„ìš© ê³µê³ ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</p>
  </div>

  <div class="jobs-grid" id="jobsGrid">
    <div class="no-data">
      <h3>ğŸ“‹ ì±„ìš©ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h3>
      <p style="color:#666">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
    </div>
  </div>
</div>

<script>
async function loadJobs(){
  const grid = document.getElementById('jobsGrid');
  try {
    const res = await fetch('gtelp_data.json', {cache: "no-store"});
    if(!res.ok) throw new Error('ë°ì´í„° íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    const jobs = await res.json();

    grid.innerHTML = jobs.map(job => {
      const title = job.job_title || job['ì œëª©'] || job['ê³µê³ ëª…'] || 'ì œëª© ì—†ìŒ';
      const company = job.company_name || job['íšŒì‚¬ëª…'] || job['ê¸°ì—…ëª…'] || 'íšŒì‚¬ëª… ë¯¸ìƒ';
      const location = job.location || job['ìœ„ì¹˜'] || job['ì§€ì—­'] || 'ì „êµ­';
      const site = job.source_site || job['ì¶œì²˜'] || job['ì‚¬ì´íŠ¸'] || 'ì¶œì²˜ ë¯¸ìƒ';

      // ëª¨ë“  ê°€ëŠ¥í•œ ë§í¬ í•„ë“œ ìš°ì„ ìˆœìœ„: (ì›ë³¸ê°’ì„ ìµœëŒ€í•œ ìœ ì§€)
      let orig = job.job_url ?? job['Job_url'] ?? job['JOB_URL'] ?? job['jobUrl'] ?? job['url'] ?? job['URL'] ?? job['Url'] ??
                 job['ë§í¬'] ?? job['ì±„ìš©ë§í¬'] ?? job['ìƒì„¸ë§í¬'] ?? job['ì§€ì›ë§í¬'] ?? job['ì±„ìš©URL'] ?? job['ì£¼ì†Œ'] ?? job['ì›¹ì‚¬ì´íŠ¸'] ?? '';

      orig = (typeof orig === 'object' && orig !== null && orig.Target) ? orig.Target : orig; // ì—‘ì…€ í•˜ì´í¼ë§í¬ ì²˜ë¦¬

      // trim
      orig = (orig || '').toString().trim();

      // ìë™ ë³´ì •: http/httpsê°€ ì—†ìœ¼ë©´ ë¶™ì´ë˜, ë§Œì•½ ê°’ì´ ë‹¨ìˆœ í‚¤ì›Œë“œ(ê³µë°± ë“±)ë©´ ë¶™ì´ì§€ ì•ŠìŒ
      let url = '';
      if(orig){
        // ì´ë¯¸ http(s)ë¡œ ì‹œì‘í•˜ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©
        if(/^https?:\/\//i.test(orig)){
          url = orig;
        } else {
          // origì´ ë„ë©”ì¸ì´ë‚˜ ê²½ë¡œì²˜ëŸ¼ ë³´ì´ë©´ https ë¶™ì—¬ì„œ ì§ì ‘ ì—°ê²°
          // íŒë‹¨ ê¸°ì¤€: '.' í¬í•¨ (example.com) ë˜ëŠ” '/'ë¡œ ì‹œì‘í•˜ëŠ” ê²½ë¡œ
          if(orig.includes('.') || orig.startsWith('/')){
            url = (orig.startsWith('//') ? 'https:' + orig : 'https://' + orig.replace(/^\/+/, ''));
          } else {
            // ë‹¨ì–´ë§Œ ë“¤ì–´ì˜¨ ê²½ìš°(ì˜ˆ: "ì§€ì›ë§í¬ ì—†ìŒ" ê°™ì€ ê°’)ë¼ë©´ urlìœ¼ë¡œ ë³´ì§€ ì•ŠìŒ
            url = '';
          }
        }
      }

      // ë§í¬ HTML: ë§í¬ê°€ ìˆìœ¼ë©´ ë°”ë¡œê°€ê¸° ë²„íŠ¼(ì§ì ‘ ë§í¬), ì—†ìœ¼ë©´ ë¹„í™œì„± ë²„íŠ¼ + ì„ íƒì  ê²€ìƒ‰ë§í¬
      let linkHtml = '';
      if(url){
        // ì•ˆì „í•˜ê²Œ HTML ì´ìŠ¤ì¼€ì´í”„ í•´ì¤„ í•„ìš”ê°€ ìˆìœ¼ë‚˜ ì—¬ê¸°ì„  í…œí”Œë¦¿ìœ¼ë¡œ ë°”ë¡œ ì‚½ì…
        linkHtml = `<a class="job-link" href="${escapeHtml(url)}" target="_blank" rel="noopener noreferrer">ìì„¸íˆ ë³´ê¸° â†’</a>`;
      } else {
        // ë§í¬ê°€ ì—†ì„ ë•Œ: 'ë§í¬ ì—†ìŒ' ë²„íŠ¼(ë¹„í™œì„±) + ì‘ê²Œ êµ¬ê¸€ ê²€ìƒ‰(ì„ íƒì )
        const searchTerm = encodeURIComponent((company || '') + ' ' + (title || ''));
        linkHtml = `<span class="btn-disabled">ë§í¬ ì—†ìŒ</span>
                    <a class="small-search" href="https://www.google.com/search?q=${searchTerm}" target="_blank" rel="noopener noreferrer">ğŸ” ê²€ìƒ‰</a>`;
      }

      return `
        <div class="job-card">
          <div class="job-title">${escapeHtml(title)}</div>
          <div class="job-company">ğŸ¢ ${escapeHtml(company)}</div>
          <div style="margin:8px 0 12px 0;">
            <span class="job-tag">ğŸ“ ${escapeHtml(location)}</span>
            <span class="job-tag">ğŸ’¼ ${escapeHtml(site)}</span>
          </div>
          <div>${linkHtml}</div>
        </div>
      `;
    }).join('');
  } catch(err){
    console.error(err);
    grid.innerHTML = `<div class="no-data"><h3>âš ï¸ ì±„ìš©ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</h3><p style="color:#666">ê´€ë¦¬ìê°€ ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div>`;
  }
}

function escapeHtml(text){
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

loadJobs();
</script>
</body>
</html>
